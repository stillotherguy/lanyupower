<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body th:inline="text">
	<div class="container wrapper">
		<div class="form-pane">
			<form id="form" class="form-horizontal" role="form" th:action="@{/api/action}" th:object="${command}" method="post">
				<div class="form-group">
					<label class="col-xs-2 control-label">API(eg:/v1/tickets)</label>
					<div class="col-xs-10">
						<input th:field="*{url}" type="text" class="form-control" placeholder="URI"/>
					</div>
				</div>
				<div class="form-group">
					<label class="col-xs-2 control-label">描述</label>
					<div class="col-xs-10">
						<textarea th:field="*{description}" class="form-control" placeholder="请输入描述"></textarea>
					</div>
				</div>
				<div class="form-group">
					<label class="col-xs-2 control-label">实现类全限定名</label>
					<div class="col-xs-10">
						<input th:field="*{clazz}" type="text" class="form-control" placeholder="class"/>
					</div>
				</div>
				<div class="form-group">
					<label class="col-xs-2 control-label">应用</label>
					<div class="col-xs-10">
						<select th:field="*{app.id}">
						  <option th:each="app : ${apps}" 
						          th:value="${app.id}" 
						          th:text="${app.name}"></option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-xs-2 control-label">任务</label>
					<div class="col-xs-10">
						<select th:field="*{job.id}">
						  <option th:each="job : ${jobs}" 
						          th:value="${job.id}" 
						          th:text="${job.name}"></option>
						</select>
					</div>
				</div>
				<input type="submit" name="提交" />
				<input type="reset" name="重置" />
			</form>
		</div>
	</div>
<script type="text/javascript" th:src="@{/js/jquery-1.9.1.min.js}"></script>
<script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery.validate.min.js}"></script>
<script>
$(function(){
	$('.header .nav li:eq(2) a').addClass('active');
	
	$('#form').validate({
		rules: {
			"url": {
				required:true
			},
			"host": {
				required:true
			},
			"clazz": {
				required:true
			},
			"app": {
				required:true
			},
			"job": {
				required:true
			}
		},
		messages: {
			"url": {
				required:"请输入URI"
			},
			"host": {
				required:"请选择host或先插入host"
			},
			"clazz": {
				required:"请输入全限定类名"
			},
			"app": {
				required:"请选择关联应用"
			},
			"job": {
				required:"请选择关联计时"
			}
		}
	});
});
</script>
</body>
</html>