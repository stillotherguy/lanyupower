<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
<title>蓝煜热力客户信息服务管理系统</title>
<meta charset="UTF-8">
<meta name="renderer" content="webkit"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<link rel="shortcut icon" th:href="/favicon.ico" />
<link type="text/css" rel="stylesheet" href="/css/bootstrap.min.css" />
<link type="text/css" rel="stylesheet" href="/css/base.css" />
<!-- <sitemesh:write property='head'/> -->
</head>
<body>
	<div th:include="fragements/header"></div>
	<div class="container wrapper">
		<div class="sidebar col-xs-2">
			<div class="sidemenu-title">用户报修</div>
			<div sec:authorize="hasRole('ROLE_USER')">
			  <ul class="nav nav-pills nav-stacked sidemenu">
				<li class="active"><a href="/report/unfinish">未处理报修(2)</a></li>
				<li><a href="">已经处理未回访(2)</a></li>
				<li><a href="">已经处理报修(2)</a></li>
			  </ul>
			</div>
		</div>
		<!-- 
		<div sec:authorize="hasRole('ROLE_ADMIN')">
  This content is only shown to administrators.
</div>
<div sec:authorize="hasRole('ROLE_USER')">
  This content is only shown to users.
</div>
The attribute sec:authentication is used to print logged user name and roles:

?
Logged user: <span sec:authentication="name">Bob</span>
Roles: <span sec:authentication="principal.authorities">[ROLE_USER, ROLE_ADMIN]</span>
		
		 -->
		<div class="main col-xs-10">
			<div class="chart-pane"><!-- <sitemesh:write property='body'/> -->
				客户档案检索：<span sec:authentication="name"></span><br/>
				用户卡号：<input type="text" id="card"/>用户地址：<input type="text" id="address"/>用户电话：<input type="text" id="phone"/><br/>
				用户姓名：<input type="text" id="name"/>用户手机：<input type="text" id="mobile"/><br/>
				<table>
					<tr>
						<td>保修单名称</td>
						<td>保修单类型</td>
						<td>客户</td>
						<td>负责人</td>
						<td>紧急联系人</td>
						<td>紧急联系人电话</td>
						<td>是否完成</td>
						<td>是否已回访</td>
					</tr>
					<tr th:each="item,stat : ${insuranceList}" th:if="${not #lists.isEmpty(insuranceList)}" id="${item.id}">
						<td>[[${item.name}]]</td>
						<td>[[${item.itype.desc}]]</td>
						<td>[[${item.client.name}]]</td>
						<td>[[${item.user.username}]]</td>
						<td>[[${item.contact}]]</td>
						<td>[[${item.phone}]]</td>
						<td>[[${item.finished}?'已完成':'未完成']]</td>
						<td>[[${item.feedback}?'已回访':'未回访']]</td>
					</tr>
				</table>
			</div>
		</div>
	</div>
	<div class="footer">
		<div class="container text-center">Copyright © 2001-2014 Rabbit Network All Rights Reserved.</div>
	</div>
<script type="text/javascript" th:src="@{/js/jquery-1.9.1.min.js}"></script>
<script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery.validate.min.js}"></script>
<script>
function remote(var url){
	$.ajax({
		url:url,
		dataType:'json',
		type:'get',
		contentType:'application/json; charset=UTF-8',
		success:function(data){
			if(data){
				//$('#result td:eq(0)').text(data.no);
				$('#result td:eq(1)').text(data.no);
				$('#result td:eq(2)').text(data.name);
				$('#result td:eq(3)').text(data.phone);
				$('#result td:eq(4)').text(data.no);
				$('#result td:eq(5)').text(data.address);
			}
		}
	});
}
$(function(){
	$('#card').click(function(){
		var no = $(this).val();
		if(!no){
			alert('请输入卡号');
			return;
		}
		remote('/admin/card/' + no);
	})
	$('#address').click(function(){
		var no = $(this).val();
		if(!no){
			alert('请输入地址');
			return;
		}
		remote('/admin/address/' + no);
	})
	$('#phone').click(function(){
		var no = $(this).val();
		if(!no){
			alert('请输入电话');
			return;
		}
		remote('/admin/phone/' + no);
	})
	$('#name').click(function(){
		var no = $(this).val();
		if(!no){
			alert('请输入名称');
			return;
		}
		remote('/admin/name/' + no);
	})
	$('#mobile').click(function(){
		var no = $(this).val();
		if(!no){
			alert('请输入mobile');
			return;
		}
		remote('/admin/mobile/' + no);
	})
});
</script>
</body>
</html>